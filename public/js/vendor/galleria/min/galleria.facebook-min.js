!function($){Galleria.requires(1.25,"The Facebook Plugin requires Galleria version 1.2.5 or later.");var e=Galleria.utils.getScriptPath(),t="v2.3";Galleria.Facebook=function(e){this.options={max:40,imageSize:"original",thumbSize:"thumb",description:!1,complete:function(){},backlink:!1,facebook_access_token:""}},Galleria.Facebook.prototype={constructor:Galleria.Facebook,album:function(e,t){return this._find({album_id:e},t)},setOptions:function(e){return $.extend(this.options,e),this},_call:function(e,t){var o="https://graph.facebook.com/"+e.album_id+"?callback=?&fields=photos.limit("+this.options.max+").fields(images,source,picture,link,name)&access_token=232961117114486|O4f1M-2vSym49PbrSW5iSemzt0g",i=this;return $.getJSON(o,function(o){o&&o.photos&&o.photos.data&&o.photos.data.length>0?t.call(i,o):Galleria.raise("Unable to retrieve Facebook photos from album "+e.album_id)}),i},_getBig:function(e){return e.images[0].source},_getSize:function(e,t){var o;switch(t){case"thumb":o=e.picture;break;case"small":o=e.picture;break;case"big":o=this._getBig(e);break;case"original":o=e.source;break;default:o=e.source}return o},_find:function(e,t){return this._call(e,function(e){var o=[],i=e.photos.data,a=Math.min(this.options.max,i.length),n,r;for(r=0;r<a;r++)n=i[r],o.push({thumb:this._getSize(n,this.options.thumbSize),image:this._getSize(n,this.options.imageSize),big:this._getBig(n),title:n.name,description:this.options.description&&n.name?n.name:"",link:this.options.backlink?n.link:""});t.call(this,o)})}};var o=Galleria.prototype.load;Galleria.prototype.load=function(){if(arguments.length||"string"!=typeof this._options.facebook)return void o.apply(this,Galleria.utils.array(arguments));var t=this,i=Galleria.utils.array(arguments),a=this._options.facebook.split(":"),n,r=$.extend({},t._options.facebookOptions),s="undefined"!=typeof r.loader?r.loader:$("<div>").css({width:48,height:48,opacity:.7,background:"#000 url("+e+"loader.gif) no-repeat 50% 50%"});if(a.length){if("function"!=typeof Galleria.Facebook.prototype[a[0]])return Galleria.raise(a[0]+" method not found in Facebook plugin"),o.apply(this,i);if(!a[1])return Galleria.raise("No facebook argument found"),o.apply(this,i);if(window.setTimeout(function(){t.$("target").append(s)},100),n=new Galleria.Facebook,"object"==typeof t._options.facebookOptions&&n.setOptions(t._options.facebookOptions),!n.options.facebook_access_token)return Galleria.raise("No facebook_access_token argument found. Set facebookOptions[facebook_access_token] in Galleria constructor."),o.apply(this,i);n[a[0]](a[1],function(e){t._data=e,s.remove(),t.trigger(Galleria.DATA),n.options.complete.call(n,e)})}else o.apply(this,i)}}(jQuery);